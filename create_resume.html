<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="resume_task.js" type="text/javascript"></script>
    <link rel="stylesheet" href="resume.css">
</head>

    <body>
        <h1>Resume Builder</h1>   
        <div class="main">
           
           <form  id="register">
               <div class="input">
                   <label>project title</label>
                   <input type="text"  placeholder="enter your project title" onkeyup="get(this,'project Title')"/>
               </div>
               <div class="input">
                   <label>ðŸ’•Name</label>
                   <input type="text"  placeholder="enter your name" onkeyup="get(this,'name')"/>
               </div>
               <div class="input">
                   <label>objective</label>
                   <input type="text"  placeholder="enter your objective" onkeyup="get(this,'objective')"/>
               </div>
               <div class="input">
                   <label>contact</label>
                   <input type="text" placeholder="enter your contact" onkeyup="get(this,'contact')"/>
               </div>
               <h2>Personal details</h2>
               <div class="input">
                   <label>father name</label>
                   <input type="text" placeholder="enter your father's name" onkeyup="get(this,'father_name','personal_details')"/>
               </div>
               <div class="input">
                   <label>mother name</label>
                   <input type="text" placeholder="enter your mother's name" onkeyup="get(this,'mother name','personal_details')"/>
               </div>
               <div class="input">
                   <label>Email</label>
                   <input type="text"  placeholder="enter your email" onkeyup="get(this,'email','personal_details')"/>
               </div>
               <div class="input">
                   <label>age</label>
                   <input type="text"  placeholder="enter your age" onkeyup="get(this,'age','personal_details')"/>
               </div>
               <div class="input">
                   <label>date of birth</label>
                   <input type="text"  placeholder="enter your date of birth" onkeyup="get(this,'date of birth','personal_details')"/>
               </div>
               <div class="input">
                   <label>place</label>
                   <input type="text"  placeholder="enter your place" onkeyup="get(this,'place','personal_details')"/>
               </div>
               <div class="input">
                   <label>skills</label>
                   <input type="text" id="skill" placeholder="enter your skills" required/>
                   <button type="button"  onclick="addArr('skills','skill')" >add</button>
               </div>
               <div class="input">
                   <label>hobbies</label>
                   <input type="text" id="hobbie" placeholder="enter your hobbies" required/>
                   <button type="button"  onclick="addArr('hobbies','hobbie')" >add</button>
               </div>
               <div class="input">
                   <label>languages</label>
                   <input type="text" id="language" placeholder="enter your languages" required/>
                   <button type="button"  onclick="addArr('languages','language')" >add</button>
               </div>
               
               <div class="education">
                   <h2>education</h2>
                   <div class="edu">
                       <input type="text" placeholder="enter your course name" onkeyup="get(this,'education',false,0,'course_name')"/>
                       <input type="text" placeholder="enter your ins name" onkeyup="get(this,'education',false,0,'ins_name')"/>
                       <input type="number" placeholder="enter your percentage" onkeyup="get(this,'education',false,0,'percentage')"/>
                       <input type="number" placeholder="enter your passsed year" onkeyup="get(this,'education',false,0,'year')"/>
           
                   </div>
                   <div class="edu">
                       <label>engineering</label>
                       <input type="text" placeholder="enter your course name" onkeyup="get(this,'education',false,1,'course_name')"/> 
                       <input type="text" placeholder="enter your ins name" onkeyup="get(this,'education',false,1,'ins_name')"/>
                       <input type="number" placeholder="enter your percentage" onkeyup="get(this,'education',false,1,'percentage')"/>
                       <input type="number" placeholder="enter your passsed year" onkeyup="get(this,'education',false,1,'year')"/> 
                   </div>            
               </div>
               <div class="projects">
                   <h2>projects</h2>
                   <div class="project">
                       <label>project 1</label> 
                       <input type="text" placeholder="enter your project name" onkeyup="get(this,'projects',false,0,'project_name')"/>
                       <input type="text" placeholder="enter your project details" onkeyup="get(this,'projects',false,0,'project_details')"/>
                   </div>
                   <div class="project">
                       <label>project 2</label> 
                       <input type="text" placeholder="enter your project name" onkeyup="get(this,'projects',false,1,'project_name')"/>
                       <input type="text" placeholder="enter your project details" onkeyup="get(this,'projects',false,1,'project_details')"/>    
                   </div>
               </div>
               <div class="experience">
                   <h2>experience</h2>
                   <div class="edu">
                       <label>experience 1</label> 
                       <input type="text" placeholder="enter your companay name" onkeyup="get(this,'experience',false,0,'companay_name')"/>
                       <input type="text" placeholder="enter your work details" onkeyup="get(this,'experience',false,0,'work_details')"/>
                       <input type="text" placeholder="enter your role" onkeyup="get(this,'experience',false,0,'role')"/>
                       <input type="number" placeholder="enter your working year" onkeyup="get(this,'experience',false,0,'working_year')"/>
                   </div>
                   <div class="edu">
                       <label>experience 2</label> 
                       <input type="text" placeholder="enter your companay name" onkeyup="get(this,'experience',false,1,'companay_name')"/>
                       <input type="text" placeholder="enter your work details" onkeyup="get(this,'experience',false,1,'work_details')"/>
                       <input type="text" placeholder="enter your role" onkeyup="get(this,'experience',false,1,'role')"/>
                       <input type="number" placeholder="enter your working year" onkeyup="get(this,'experience',false,1,'working_year')"/>
                   </div>            
               </div>
               <div class="declaration">
                   <label>declaration</label>
                   <input type="text" placeholder="enter your declaration" onkeyup="get(this,'declaration')"/>
               </div>
               <button type="button" class="btn" id="submit">submit</button> 
           </form>
            
           <div class="code_preview">
               <pre id="code">
       
               </pre>
           </div>
        </div>   
       </body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
    import { getFirestore,addDoc, collection,getDocs,doc,getDoc } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCgvV_ZTidnUDUcSEOKbOQpeocqHlvlOyM",
      authDomain: "resume-builder-project-cb6ca.firebaseapp.com",
      projectId: "resume-builder-project-cb6ca",
      storageBucket: "resume-builder-project-cb6ca.appspot.com",
      messagingSenderId: "726622035139",
      appId: "1:726622035139:web:5b843b927e93be35885676"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const parms = new URLSearchParams(document.location.search);
        const id = parms.get('userId') 


        document.getElementById('submit').addEventListener('click', async (e)=>{
          let data= localStorage.getItem("userData")
          let prase_data=JSON.parse(data)
            const docRef =await addDoc(collection(db, "resumes"), {...myresume,userId:prase_data.id})

            // location = 'resume_list.html'
            location = `resume_list.html?resumeId=${id}`
        })
     
        
        // IF localstorage have no data back to login page
        if(!localStorage.getItem('userData')){
            location = "login.html"
        }

        // logout
        // document.getElementById('logout').addEventListener('click',(e)=>{
        //     localStorage.removeItem('userloginData')
        //     location="login.html"
        // })

  </script>
</html>